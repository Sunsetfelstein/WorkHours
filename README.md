# Техническое задание для разработки веб-приложения "WorkHours"
**Учет трудозатрат (ASP.NET Core + React)**

---

## 1. **Обзор проекта**
Приложение предназначено для учета рабочего времени сотрудников, управления задачами и формирования отчетов.  
**Целевая аудитория**: компании с иерархической структурой (администраторы, руководители, сотрудники).

---

## 2. **Функциональные требования**

### 2.1 **Аутентификация и регистрация**
- Первый зарегистрированный пользователь автоматически получает роль **Администратора**.
- Администратор вводит данные компании (название, контакты, логотип).
- Регистрация новых пользователей:
    - Начальник отдела генерирует уникальную **одноразовую ссылку** для регистрации.
    - После регистрации по ссылке пользователь автоматически становится **Рабочим** в соответствующем отделе.
    - Ссылка становится недействительной после успешной регистрации.

### 2.2 **Роли и права доступа**
| Роль                | Права                                                                                     |  
|----------------------|------------------------------------------------------------------------------------------|  
| **Администратор**    | - Полный доступ ко всем функциям системы.                                               |  
| **Ген. директор**    | - Создание/управление отделами.<br>- Формирование отчетов по всей компании, отделам, сотрудникам. |  
| **Начальник отдела** | - Управление своим отделом (редактирование, добавление задач).<br>- Формирование отчетов по отделу и сотрудникам. |  
| **Рабочий**          | - Управление своими задачами (старт, пауза, завершение, архивация).<br>- Формирование персональных отчетов. |  

### 2.3 **Управление структурой компании**
- Администратор и ген. директор могут:
    - Создавать/редактировать/удалять отделы.
    - Назначать начальников отделов.
    - Редактировать данные пользователей (роли, отделы).
- Начальник отдела может просматривать только свой отдел.

### 2.4 **Управление задачами**
- **Создание задач**:
    - Начальник отдела создает задачи для сотрудников своего отдела.
    - Задачи имеют параметры: название, описание, срок выполнения, приоритет.
- **Работа с задачами**:
    - Рабочие меняют статус задачи: *в работе*, *на паузе*, *завершено*, *в архиве*.
    - Все изменения фиксируются в истории (время, пользователь).

### 2.5 **Отчеты**
- Типы отчетов:
    - По трудозатратам (время, задачи, эффективность).
    - Фильтры: период, отдел, сотрудник, статус задачи.
- Форматы вывода: PDF, Excel, веб-страница.

---

## 3. **Нефункциональные требования**
- **Безопасность**:
    - Хранение паролей в хешированном виде.
    - Защита от CSRF, XSS, SQL-инъекций.
    - Ролевая модель доступа (RBAC).
- **Производительность**:
    - Время отклика интерфейса ≤ 2 сек.
    - Поддержка до 1000 пользователей одновременно.
- **Интерфейс**:
    - Адаптивный дизайн (поддержка ПК, планшетов).
    - Локализация (русский/английский).

---

## 4. **Технологии**
- **Бэкенд**: ASP.NET Core 6+ (C#), REST API, Entity Framework Core, PostgreSQL.
- **Фронтенд**: React 18+, TypeScript, Redux Toolkit, Material-UI.
- **Аутентификация**: JWT-токены.
- **Дополнительно**:
    - Библиотека для отчетов: **ClosedXML** (Excel), **Puppeteer** (PDF).
    - Логирование: Serilog.

---

## 5. **Этапы разработки**
1. **Проектирование**:
    - Схема БД, API-эндпоинты, макеты интерфейса (Figma).
2. **Бэкенд**:
    - Реализация API, ролевая модель, система отчетов.
3. **Фронтенд**:
    - Страницы: регистрация, управление отделами, задачи, отчеты.
4. **Интеграция и тестирование**:
    - Unit-тесты (xUnit), E2E-тесты (Cypress).
5. **Деплой и документирование**:
    - Инструкции для пользователей и администраторов.

---